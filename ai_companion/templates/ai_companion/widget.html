<!-- ai_companion/templates/ai_companion/widget.html -->
{% load static %}

<link rel="stylesheet" href="{% static 'ai_companion/css/widget.css' %}">

<div id="aiWidgetContainer" style="all: initial; position: fixed; bottom: 20px; right: 20px; z-index: 999998; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
    
    <div class="ai-companion-widget">
        <button class="ai-companion-button" onclick="toggleAIChat()">
            <span class="icon">ğŸ¤–</span>
            <span class="notification-dot" style="display: none;"></span>
        </button>

        <div class="ai-chat-container" id="aiChatContainer">
            <div class="ai-chat-header">
                <div class="header-content">
                    <div class="ai-avatar"><img src="{% static 'accounts/images/logo.png' %}" alt="Logo" class="logo-image" style="width: 30px; height: 30px;"></div>
                    <div class="ai-info">
                        <div class="ai-name">MindEase AI</div>
                        <div class="ai-status">
                            <span class="status-dot"></span>
                            <span>Always here for you</span>
                        </div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="header-action-btn fullscreen-btn" onclick="toggleFullscreen()">â›¶</button>
                    <button class="header-action-btn" onclick="openClearChatModal()" title="Clear conversation">ğŸ—‘ï¸</button>
                    <button class="close-btn" onclick="toggleAIChat()">Ã—</button>
                </div>
            </div>

            <div class="ai-chat-messages" id="chatMessages">
                <!-- Welcome message will be inserted dynamically via JS -->
            </div>

            <div class="quick-actions">
                <button class="quick-action-btn" onclick="sendQuickMessage('How do I register for an account?')">
                    <span>ğŸ“</span> How to Register
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('I need help logging in')">
                    <span>ğŸ”‘</span> Login Help
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('Tell me about your counselors')">
                    <span>ğŸ‘¨â€âš•ï¸</span> About Counselors
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('What features does MindEase offer?')">
                    <span>âœ¨</span> Platform Features
                </button>
                <button class="quick-action-btn" onclick="sendQuickMessage('I need mental health support')">
                    <span>ğŸ’™</span> Get Support
                </button>
            </div>

            <div class="ai-chat-input">
                <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()" id="sendButton">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    window.AI_USER_NAME = "{{ full_name|default:user.full_name|default:'there'|escapejs }}";
</script>


<script src="{% static 'ai_companion/js/widget.js' %}"></script>
